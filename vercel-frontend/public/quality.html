<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Quality Scoring | Polymarket AI Trading Protocol</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“Š</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', sans-serif;
            background: #0D1117;
            color: #E8EAED;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            margin-bottom: 40px;
            border-bottom: 1px solid #252A41;
            padding-bottom: 20px;
        }

        h1 {
            font-size: 32px;
            font-weight: 700;
            color: #E8EAED;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }

        .subtitle {
            font-size: 16px;
            color: #9AA0A6;
            margin-bottom: 24px;
        }

        .main-nav {
            display: flex;
            gap: 24px;
            margin-top: 20px;
        }

        .nav-item {
            text-decoration: none;
            color: #9AA0A6;
            font-size: 14px;
            font-weight: 500;
            padding: 8px 0;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }

        .nav-item:hover {
            color: #E8EAED;
        }

        .nav-item.active {
            color: #1A73E8;
            border-bottom-color: #1A73E8;
        }

        .info-box {
            background: #1F2544;
            border: 1px solid #252A41;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 32px;
        }

        .info-title {
            font-size: 14px;
            font-weight: 600;
            color: #1A73E8;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .info-text {
            font-size: 14px;
            color: #9AA0A6;
            line-height: 1.6;
        }

        .markets-list {
            display: grid;
            gap: 16px;
        }

        .market-card {
            background: #161B33;
            border: 1px solid #252A41;
            border-radius: 8px;
            padding: 24px;
            transition: all 0.2s;
        }

        .market-card:hover {
            border-color: #1A73E8;
            background: #1A1F36;
        }

        .market-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .market-question {
            flex: 1;
            font-size: 16px;
            font-weight: 500;
            color: #E8EAED;
            line-height: 1.4;
            margin-right: 20px;
        }

        .grade-badge {
            font-size: 24px;
            font-weight: 700;
            padding: 8px 16px;
            border-radius: 6px;
            min-width: 60px;
            text-align: center;
        }

        .grade-aplus {
            background: rgba(52, 168, 83, 0.2);
            color: #34A853;
        }

        .grade-a {
            background: rgba(52, 168, 83, 0.15);
            color: #34A853;
        }

        .grade-b {
            background: rgba(26, 115, 232, 0.15);
            color: #1A73E8;
        }

        .grade-c {
            background: rgba(245, 158, 11, 0.15);
            color: #F59E0B;
        }

        .grade-d {
            background: rgba(234, 67, 53, 0.15);
            color: #EA4335;
        }

        .quality-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 16px;
            margin-bottom: 16px;
        }

        .quality-metric {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .metric-label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #9AA0A6;
            font-weight: 600;
        }

        .metric-value {
            font-size: 18px;
            font-weight: 600;
            color: #E8EAED;
        }

        .metric-bar {
            height: 4px;
            background: #252A41;
            border-radius: 2px;
            overflow: hidden;
            margin-top: 4px;
        }

        .metric-fill {
            height: 100%;
            background: linear-gradient(90deg, #1A73E8, #34A853);
            border-radius: 2px;
            transition: width 0.3s;
        }

        .market-price {
            font-size: 14px;
            color: #9AA0A6;
            margin-top: 12px;
            display: flex;
            justify-content: space-between;
            padding-top: 12px;
            border-top: 1px solid #252A41;
        }

        .price-label {
            color: #9AA0A6;
        }

        .price-value {
            color: #1A73E8;
            font-weight: 600;
        }

        .loading {
            text-align: center;
            padding: 60px 20px;
            color: #9AA0A6;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Market Quality Scoring</h1>
            <p class="subtitle">AI assessment of market liquidity, clarity, and trading reliability</p>
            <nav class="main-nav">
                <a href="index.html" class="nav-item">Dashboard</a>
                <a href="signals.html" class="nav-item">Signals</a>
                <a href="ai-insights.html" class="nav-item">AI Insights</a>
                <a href="quality.html" class="nav-item active">Quality Scoring</a>
                <a href="resolution.html" class="nav-item">Resolution</a>
                <a href="about.html" class="nav-item">Strategy</a>
            </nav>
        </header>

        <div class="info-box">
            <div class="info-title">Quality Scoring Algorithm</div>
            <div class="info-text">
                Each market is scored 0-100 across four dimensions: <strong>Liquidity</strong> (35% weight, based on 24h volume), 
                <strong>Spread</strong> (25% weight, tighter is better), <strong>Activity</strong> (15% weight, recent trading frequency), 
                and <strong>Clarity</strong> (25% weight, question simplicity). Higher scores indicate better trading conditions.
            </div>
        </div>

        <div class="markets-list" id="markets-list">
            <div class="loading">Loading top quality markets...</div>
        </div>
    </div>

    <script>
        const API_BASE = 'https://turtle-proved-thereby-gateway.trycloudflare.com';

        async function fetchQualityMarkets() {
            try {
                const response = await fetch(`${API_BASE}/api/quality/top-markets?limit=30`);
                if (!response.ok) throw new Error('Failed to fetch markets');
                const data = await response.json();
                renderMarkets(data.markets || []);
            } catch (error) {
                console.error('Error fetching quality markets:', error);
                document.getElementById('markets-list').innerHTML = 
                    '<div class="loading">Failed to load markets. Retrying...</div>';
            }
        }

        function renderMarkets(markets) {
            const list = document.getElementById('markets-list');
            
            if (markets.length === 0) {
                list.innerHTML = '<div class="loading">No markets found</div>';
                return;
            }

            list.innerHTML = markets.map((market, index) => {
                const quality = market.quality;
                const gradeClass = `grade-${quality.grade.toLowerCase().replace('+', 'plus')}`;
                
                return `
                    <div class="market-card">
                        <div class="market-header">
                            <div class="market-question">
                                <span style="color: #9AA0A6; font-size: 13px; font-weight: 600; margin-right: 8px;">#${index + 1}</span>
                                ${market.question}
                            </div>
                            <div class="grade-badge ${gradeClass}">${quality.grade}</div>
                        </div>

                        <div class="quality-breakdown">
                            <div class="quality-metric">
                                <div class="metric-label">Total Score</div>
                                <div class="metric-value">${quality.total_score}/100</div>
                                <div class="metric-bar">
                                    <div class="metric-fill" style="width: ${quality.total_score}%"></div>
                                </div>
                            </div>
                            <div class="quality-metric">
                                <div class="metric-label">Liquidity</div>
                                <div class="metric-value">${quality.liquidity_score.toFixed(1)}</div>
                                <div class="metric-bar">
                                    <div class="metric-fill" style="width: ${(quality.liquidity_score / 35) * 100}%"></div>
                                </div>
                            </div>
                            <div class="quality-metric">
                                <div class="metric-label">Spread</div>
                                <div class="metric-value">${quality.spread_score.toFixed(1)}</div>
                                <div class="metric-bar">
                                    <div class="metric-fill" style="width: ${(quality.spread_score / 25) * 100}%"></div>
                                </div>
                            </div>
                            <div class="quality-metric">
                                <div class="metric-label">Activity</div>
                                <div class="metric-value">${quality.activity_score.toFixed(1)}</div>
                                <div class="metric-bar">
                                    <div class="metric-fill" style="width: ${(quality.activity_score / 15) * 100}%"></div>
                                </div>
                            </div>
                            <div class="quality-metric">
                                <div class="metric-label">Clarity</div>
                                <div class="metric-value">${quality.clarity_score.toFixed(1)}</div>
                                <div class="metric-bar">
                                    <div class="metric-fill" style="width: ${(quality.clarity_score / 25) * 100}%"></div>
                                </div>
                            </div>
                        </div>

                        <div class="market-price">
                            <span class="price-label">24h Volume: <span class="price-value">$${quality.volume_24h.toLocaleString()}</span></span>
                            <span class="price-label">Current Price: <span class="price-value">${(market.price * 100).toFixed(1)}Â¢</span></span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Initial load
        fetchQualityMarkets();
        // Refresh every 60 seconds
        setInterval(fetchQualityMarkets, 60000);
    </script>
</body>
</html>

