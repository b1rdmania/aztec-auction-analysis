<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prediction Market Toolkit</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #141414;
            --bg-card: #1a1a1a;
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
            --accent: #00ff88;
            --accent-dim: #00cc6e;
            --warning: #ffaa00;
            --danger: #ff4444;
            --border: #2a2a2a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Header */
        header {
            padding: 3rem 0;
            text-align: center;
            border-bottom: 1px solid var(--border);
            margin-bottom: 3rem;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--accent), #00ccff);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        /* Navigation */
        nav {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 2rem;
        }

        nav a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.2s;
        }

        nav a:hover,
        nav a.active {
            color: var(--accent);
            background: rgba(0, 255, 136, 0.1);
        }

        /* Tools Grid */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .tool-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s;
        }

        .tool-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
        }

        .tool-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .tool-name {
            font-size: 1.3rem;
            font-weight: 600;
        }

        .tool-status {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-ready {
            background: rgba(0, 255, 136, 0.15);
            color: var(--accent);
        }

        .status-planned {
            background: rgba(255, 170, 0, 0.15);
            color: var(--warning);
        }

        .tool-description {
            color: var(--text-secondary);
            margin-bottom: 1rem;
            font-size: 0.95rem;
        }

        .tool-features {
            list-style: none;
            margin-bottom: 1.5rem;
        }

        .tool-features li {
            padding: 0.25rem 0;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .tool-features li::before {
            content: "‚Üí ";
            color: var(--accent);
        }

        .tool-actions {
            display: flex;
            gap: 0.75rem;
        }

        .btn {
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.2s;
            cursor: pointer;
            border: none;
        }

        .btn-primary {
            background: var(--accent);
            color: var(--bg-primary);
        }

        .btn-primary:hover {
            background: var(--accent-dim);
        }

        .btn-secondary {
            background: transparent;
            color: var(--text-secondary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            border-color: var(--text-secondary);
            color: var(--text-primary);
        }

        /* Quick Start */
        .quickstart {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 3rem;
        }

        .quickstart h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .code-block {
            background: var(--bg-primary);
            border-radius: 8px;
            padding: 1rem;
            font-family: 'Fira Code', 'Monaco', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            margin: 1rem 0;
        }

        .code-block code {
            color: var(--accent);
        }

        .code-comment {
            color: var(--text-secondary);
        }

        /* Research Section */
        .research-section {
            border-top: 1px solid var(--border);
            padding-top: 3rem;
        }

        .research-section h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .research-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .research-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
        }

        .research-card h3 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }

        .research-card p {
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        .research-card .count {
            color: var(--accent);
            font-weight: 600;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 2rem 0;
            border-top: 1px solid var(--border);
            margin-top: 3rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        footer a {
            color: var(--accent);
            text-decoration: none;
        }

        /* Back link */
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .back-link:hover {
            color: var(--accent);
        }

        /* Demo Section */
        .demo-section {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 3rem;
        }

        .demo-section h2 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .demo-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .demo-results {
            min-height: 200px;
            max-height: 500px;
            overflow-y: auto;
            background: var(--bg-primary);
            border-radius: 8px;
            padding: 1rem;
        }

        .demo-placeholder {
            color: var(--text-secondary);
            text-align: center;
            padding: 2rem;
        }

        .demo-loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            padding: 2rem;
            color: var(--text-secondary);
        }

        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid var(--border);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .market-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.75rem;
            transition: all 0.2s;
        }

        .market-card:hover {
            border-color: var(--accent);
        }

        .market-question {
            font-weight: 500;
            margin-bottom: 0.5rem;
            line-height: 1.4;
        }

        .market-stats {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .market-stat {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .market-stat.volume {
            color: var(--accent);
        }

        .market-stat.price {
            color: #00ccff;
        }

        .market-stat.change-up {
            color: #00ff88;
        }

        .market-stat.change-down {
            color: #ff4444;
        }

        .error-message {
            color: var(--danger);
            background: rgba(255, 68, 68, 0.1);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
        }
    </style>
</head>

<body>
    <div class="container">
        <a href="../" class="back-link">‚Üê Back to Main Dashboard</a>

        <header>
            <h1>üõ†Ô∏è Prediction Market Toolkit</h1>
            <p class="subtitle">Open-source tools for prediction market research and trading</p>
            <nav>
                <a href="#tools" class="active">Tools</a>
                <a href="#demo">Live Demo</a>
                <a href="#quickstart">Quick Start</a>
                <a href="#research">Research</a>
                <a href="https://github.com/b1rdmania/aztec-auction-analysis" target="_blank">GitHub</a>
            </nav>
        </header>

        <section id="tools">
            <div class="tools-grid">
                <!-- Polymarket Data -->
                <div class="tool-card">
                    <div class="tool-header">
                        <span class="tool-name">üìä polymarket-data</span>
                        <span class="tool-status status-ready">Ready</span>
                    </div>
                    <p class="tool-description">
                        Read-only Polymarket data fetcher. No API keys required.
                    </p>
                    <ul class="tool-features">
                        <li>Search markets by keyword</li>
                        <li>Get trending by 24h/7d/30d volume</li>
                        <li>Orderbook depth & spreads</li>
                        <li>Volatility scanner (detect movers)</li>
                        <li>CLI included</li>
                    </ul>
                    <div class="tool-actions">
                        <a href="https://github.com/b1rdmania/aztec-auction-analysis/tree/main/toolkit/polymarket-data"
                            class="btn btn-primary" target="_blank">View on GitHub</a>
                        <a href="#install-polymarket-data" class="btn btn-secondary">Install</a>
                    </div>
                </div>

                <!-- Volatility Alerts -->
                <div class="tool-card">
                    <div class="tool-header">
                        <span class="tool-name">üö® volatility-alerts</span>
                        <span class="tool-status status-ready">Ready</span>
                    </div>
                    <p class="tool-description">
                        Real-time price movement detection and alerting.
                    </p>
                    <ul class="tool-features">
                        <li>Threshold alerts (>X% moves)</li>
                        <li>Volume spike detection</li>
                        <li>Spread widening alerts</li>
                        <li>Discord/Telegram/webhook output</li>
                        <li>Continuous monitoring</li>
                    </ul>
                    <div class="tool-actions">
                        <a href="https://github.com/b1rdmania/aztec-auction-analysis/tree/main/toolkit/volatility-alerts"
                            class="btn btn-primary" target="_blank">View on GitHub</a>
                        <a href="#install-volatility-alerts" class="btn btn-secondary">Install</a>
                    </div>
                </div>

                <!-- Mean Reversion -->
                <div class="tool-card">
                    <div class="tool-header">
                        <span class="tool-name">üìà mean-reversion</span>
                        <span class="tool-status status-ready">Ready</span>
                    </div>
                    <p class="tool-description">
                        Mean reversion signal generator based on behavioral finance research.
                    </p>
                    <ul class="tool-features">
                        <li>Overconfidence bias detection</li>
                        <li>Horizon-based signals (1-3 weeks)</li>
                        <li>Position sizing (Kelly criterion)</li>
                        <li>Backtest framework</li>
                    </ul>
                    <div class="tool-actions">
                        <a href="https://github.com/b1rdmania/aztec-auction-analysis/tree/main/toolkit/mean-reversion"
                            class="btn btn-primary" target="_blank">View on GitHub</a>
                        <a href="#install-mean-reversion" class="btn btn-secondary">Install</a>
                    </div>
                </div>

                <!-- Whale Tracker -->
                <div class="tool-card">
                    <div class="tool-header">
                        <span class="tool-name">üêã whale-tracker</span>
                        <span class="tool-status status-ready">Ready</span>
                    </div>
                    <p class="tool-description">
                        Monitor large trades and smart money wallets.
                    </p>
                    <ul class="tool-features">
                        <li>Large trade detection</li>
                        <li>Wallet watchlist</li>
                        <li>PredictFolio integration</li>
                        <li>On-chain analytics</li>
                    </ul>
                    <div class="tool-actions">
                        <a href="https://github.com/b1rdmania/aztec-auction-analysis/tree/main/toolkit/whale-tracker"
                            class="btn btn-primary" target="_blank">View on GitHub</a>
                        <a href="#install-whale-tracker" class="btn btn-secondary">Install</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- LIVE DEMO SECTION -->
        <section id="demo" class="demo-section">
            <h2>üî¥ Live Demo</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                Try the tools right here ‚Äî fetching real data from Polymarket APIs.
            </p>

            <div class="demo-controls">
                <button class="btn btn-primary" onclick="fetchTrending()">üìà Trending Markets</button>
                <button class="btn btn-primary" onclick="fetchMovers()">üö® Volatility Movers</button>
                <button class="btn btn-primary" onclick="fetchPolitics()">üèõÔ∏è Political Markets</button>
                <button class="btn btn-secondary" onclick="clearResults()">Clear</button>
            </div>

            <div id="demo-results" class="demo-results">
                <p class="demo-placeholder">Click a button above to fetch live data...</p>
            </div>

            <div id="demo-loading" class="demo-loading" style="display: none;">
                <div class="spinner"></div>
                <span>Fetching from Polymarket...</span>
            </div>
        </section>

        <section id="quickstart" class="quickstart">
            <h2>‚ö° Quick Start</h2>
            <p>Install and run in under a minute. No API keys required.</p>

            <div class="code-block">
                <code><span class="code-comment"># Clone the repo</span><br>
git clone https://github.com/b1rdmania/aztec-auction-analysis.git<br>
cd aztec-analysis/toolkit<br><br>

<span class="code-comment"># Install polymarket-data</span><br>
pip install -e polymarket-data<br><br>

<span class="code-comment"># Search markets</span><br>
polymarket search "trump"<br><br>

<span class="code-comment"># Find movers (>10% price change)</span><br>
polymarket movers --threshold 10<br><br>

<span class="code-comment"># Start volatility monitor</span><br>
pip install -e volatility-alerts<br>
volatility-alert trending --threshold 5</code>
            </div>
        </section>

        <section id="research" class="research-section">
            <h2>üìö Research Database</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                Academic literature supporting the emotional volatility arbitrage thesis.
            </p>

            <div class="research-grid">
                <div class="research-card">
                    <h3>Prediction Market Accuracy</h3>
                    <p><span class="count">7</span> papers on market efficiency and aggregation</p>
                </div>
                <div class="research-card">
                    <h3>Biases & In-Play Betting</h3>
                    <p><span class="count">7</span> papers on overconfidence, longshots, and behavioral patterns</p>
                </div>
                <div class="research-card">
                    <h3>Governance & Risk</h3>
                    <p><span class="count">3</span> papers on prediction markets for corporate control</p>
                </div>
                <div class="research-card">
                    <h3>AI Forecasting</h3>
                    <p><span class="count">6</span> sources on AI as near-future oracles</p>
                </div>
                <div class="research-card">
                    <h3>Corruption Analytics</h3>
                    <p><span class="count">4</span> papers on predictive anti-corruption</p>
                </div>
                <div class="research-card">
                    <h3>General References</h3>
                    <p><span class="count">2</span> foundational sources and digests</p>
                </div>
            </div>
        </section>

        <footer>
            <p>
                Built for <a href="https://polymarket.com" target="_blank">Polymarket</a> research.
                No trading advice. Use at your own risk.
            </p>
        </footer>
    </div>

    <script>
        // Polymarket Gamma API (public, no auth required)
        const GAMMA_API = 'https://gamma-api.polymarket.com';

        // CORS proxy to bypass browser restrictions
        const CORS_PROXY = 'https://api.allorigins.win/raw?url=';

        // Fetch with CORS proxy
        async function fetchWithProxy(url) {
            const response = await fetch(CORS_PROXY + encodeURIComponent(url));
            if (!response.ok) throw new Error('API request failed');
            return response.json();
        }

        // Helper to format USD
        function formatUSD(value) {
            if (value >= 1000000) return `$${(value / 1000000).toFixed(1)}M`;
            if (value >= 1000) return `$${(value / 1000).toFixed(0)}K`;
            return `$${value.toFixed(0)}`;
        }

        // Helper to format price as probability
        function formatPrice(prices) {
            if (!prices || !prices.length) return '?';
            const price = parseFloat(prices[0]);
            return `${(price * 100).toFixed(0)}%`;
        }

        // Show loading state
        function showLoading() {
            document.getElementById('demo-results').innerHTML = '';
            document.getElementById('demo-loading').style.display = 'flex';
        }

        // Hide loading state
        function hideLoading() {
            document.getElementById('demo-loading').style.display = 'none';
        }

        // Render markets to results
        function renderMarkets(markets, title) {
            const resultsDiv = document.getElementById('demo-results');

            let html = `<h3 style="margin-bottom: 1rem; color: var(--accent);">${title}</h3>`;

            if (!markets || markets.length === 0) {
                html += '<p class="demo-placeholder">No markets found</p>';
            } else {
                markets.slice(0, 10).forEach(market => {
                    const volume = parseFloat(market.volume24hr || 0);
                    const prices = market.outcomePrices;

                    html += `
                        <div class="market-card">
                            <div class="market-question">${market.question}</div>
                            <div class="market-stats">
                                <span class="market-stat volume">üìä ${formatUSD(volume)} (24h)</span>
                                <span class="market-stat price">üí∞ ${formatPrice(prices)} YES</span>
                                ${market.endDate ? `<span class="market-stat">‚è∞ Ends ${new Date(market.endDate).toLocaleDateString()}</span>` : ''}
                            </div>
                        </div>
                    `;
                });
            }

            resultsDiv.innerHTML = html;
        }

        // Show error
        function showError(message) {
            document.getElementById('demo-results').innerHTML = `
                <div class="error-message">
                    ‚ùå ${message}
                </div>
            `;
        }

        // Fetch trending markets (sorted by 24h volume)
        async function fetchTrending() {
            showLoading();
            try {
                let markets = await fetchWithProxy(`${GAMMA_API}/markets?active=true`);

                // Sort by 24h volume
                markets.sort((a, b) => {
                    const volA = parseFloat(a.volume24hr || 0);
                    const volB = parseFloat(b.volume24hr || 0);
                    return volB - volA;
                });

                hideLoading();
                renderMarkets(markets, 'üìà Top 10 Trending Markets (24h Volume)');
            } catch (error) {
                hideLoading();
                showError('Failed to fetch trending markets. CORS may be blocking the request.');
                console.error(error);
            }
        }

        // Fetch movers (high volume, recent activity)
        async function fetchMovers() {
            showLoading();
            try {
                let markets = await fetchWithProxy(`${GAMMA_API}/markets?active=true`);

                // Filter for high volume markets (potential movers)
                markets = markets.filter(m => parseFloat(m.volume24hr || 0) > 50000);

                // Sort by volume as proxy for activity
                markets.sort((a, b) => {
                    const volA = parseFloat(a.volume24hr || 0);
                    const volB = parseFloat(b.volume24hr || 0);
                    return volB - volA;
                });

                hideLoading();
                renderMarkets(markets, 'üö® High Activity Markets (>$50K 24h volume)');
            } catch (error) {
                hideLoading();
                showError('Failed to fetch movers. CORS may be blocking the request.');
                console.error(error);
            }
        }

        // Fetch political markets
        async function fetchPolitics() {
            showLoading();
            try {
                let markets = await fetchWithProxy(`${GAMMA_API}/markets?tag=Politics&active=true`);

                // Sort by volume
                markets.sort((a, b) => {
                    const volA = parseFloat(a.volume24hr || 0);
                    const volB = parseFloat(b.volume24hr || 0);
                    return volB - volA;
                });

                hideLoading();
                renderMarkets(markets, 'üèõÔ∏è Political Markets');
            } catch (error) {
                hideLoading();
                showError('Failed to fetch political markets. CORS may be blocking the request.');
                console.error(error);
            }
        }

        // Clear results
        function clearResults() {
            document.getElementById('demo-results').innerHTML = `
                <p class="demo-placeholder">Click a button above to fetch live data...</p>
            `;
        }
    </script>
</body>

</html>